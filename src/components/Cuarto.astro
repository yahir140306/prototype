---
import { CUARTO } from "./cuarto";
import { createClient } from "../lib/supabase";
const supabase = createClient({
  request: Astro.request,
  cookies: Astro.cookies,
});
const { data: cuartos, error } = await supabase.from("cuartos").select("*");
---

<div class="max-w-2xl mx-auto p-4">
  <div class="grid gap-6 grid-cols-1">
    {
      CUARTO.map((cuarto) => (
        <div class="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
          <img
            src={cuarto.image}
            alt={cuarto.name}
            class="w-full h-48 object-cover"
          />
          <div class="p-4">
            <h2 class="text-xl font-semibold mb-2">{cuarto.name}</h2>
            <p class="text-gray-600 mb-3">{cuarto.description}</p>
            <div class="flex justify-between items-center">
              <span class="text-lg font-bold">${cuarto.price}/mes</span>
              <a
                href="/cuartoInformacion"
                class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors"
              >
                Ver más
              </a>
            </div>
          </div>
        </div>
      ))
    }
    {error && <p class="text-red-500">{error.message}</p>}

    {
      cuartos?.map((cuarto) => (
        <div class="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
          <img
            src={cuarto.imagen_1}
            alt={cuarto.name}
            class="w-full h-48 object-cover"
          />
          <div class="p-4">
            <h2 class="text-xl font-semibold mb-2">{cuarto.name}</h2>
            <p class="text-gray-600 mb-3">{cuarto.descripcion}</p>
            <div class="flex justify-between items-center">
              <span class="text-lg font-bold">${cuarto.precio}/mes</span>
              <a
                href={`/cuarto/${cuarto.id}`}
                class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors"
              >
                Ver más
              </a>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</div>
