---
// Componente de accesibilidad global
---

<!-- Skip Links para navegación con teclado -->
<div class="sr-only focus:not-sr-only">
  <a href="#main-content" class="skip-link">
    Saltar al contenido principal
  </a>
  <a href="#navigation" class="skip-link">
    Ir a la navegación
  </a>
</div>

<style>
  .skip-link {
    position: absolute;
    top: 0;
    left: 0;
    background: #3B82F6;
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 9999;
    border-radius: 0 0 4px 0;
    font-weight: 500;
  }

  .skip-link:focus {
    outline: 2px solid white;
    outline-offset: 2px;
  }

  /* Mejoras de contraste */
  .high-contrast {
    filter: contrast(150%) brightness(90%);
  }

  /* Indicador de focus mejorado */
  .focus-visible {
    outline: 3px solid #3B82F6 !important;
    outline-offset: 2px !important;
    border-radius: 4px;
  }

  /* Estados de hover/focus más claros */
  .interactive:hover,
  .interactive:focus {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  /* Animaciones respetan preferencias del usuario */
  @media (prefers-reduced-motion: reduce) {
    .interactive:hover,
    .interactive:focus {
      transform: none;
    }
  }

  /* Mejores colores para daltonismo */
  .color-safe-error {
    background-color: #DC2626;
    border-left: 4px solid #B91C1C;
  }

  .color-safe-success {
    background-color: #059669;
    border-left: 4px solid #047857;
  }

  .color-safe-warning {
    background-color: #D97706;
    border-left: 4px solid #B45309;
  }

  /* Estados de carga accesibles */
  .loading-spinner[aria-live="polite"]:before {
    content: "Cargando...";
    position: absolute;
    left: -9999px;
  }
</style>

<!-- Notificaciones ARIA Live para cambios dinámicos -->
<div
  id="sr-notifications"
  aria-live="polite"
  aria-atomic="true"
  class="sr-only"
></div>

<div
  id="sr-alerts"
  aria-live="assertive"
  aria-atomic="true"
  class="sr-only"
></div>

<script is:inline>
  // Función para notificar a screen readers
  function notifyScreenReader(message, priority) {
    priority = priority || 'polite';
    const container = priority === 'assertive' ? 
      document.getElementById('sr-alerts') : 
      document.getElementById('sr-notifications');
    
    if (container) {
      container.textContent = message;
      // Limpiar después de 5 segundos
      setTimeout(function() {
        container.textContent = '';
      }, 5000);
    }
  }

  // Mejorar focus de elementos interactivos
  document.addEventListener('DOMContentLoaded', function() {
    const interactiveElements = document.querySelectorAll(
      'button, a[href], input, textarea, select'
    );

    interactiveElements.forEach(function(element) {
      element.classList.add('interactive');
    });
  });

  // Detectar si el usuario usa teclado para navegación
  let isUsingKeyboard = false;

  document.addEventListener('keydown', function(e) {
    if (e.key === 'Tab') {
      isUsingKeyboard = true;
      document.body.classList.add('keyboard-navigation');
    }
  });

  document.addEventListener('mousedown', function() {
    isUsingKeyboard = false;
    document.body.classList.remove('keyboard-navigation');
  });

  // Mejorar anuncios para filtros y acciones
  document.addEventListener('click', function(e) {
    const target = e.target;
    if (target && target.id === 'filtrar-btn') {
      notifyScreenReader('Filtros aplicados. Resultados actualizados.');
    }
    
    if (target && target.id === 'limpiar-btn') {
      notifyScreenReader('Filtros limpiados. Mostrando todos los cuartos.');
    }
  });
</script>
